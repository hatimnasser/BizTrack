/* ═══════════════════════════════════════════
   DESIGN SYSTEM — Warm Fintech  (BizTrack Pro)
   Primary:  Deep Teal    #1B3A4B
   Surface:  Warm cream   #F7F4EF
   Card:     Pure white   #FFFFFF
   Accent:   Amber        #E8A020
   Success:  Sage green   #2D6A4F
   Danger:   Terracotta   #C1440E
   Muted:    Warm grey    #9C8F85
═══════════════════════════════════════════ */
:root{
  --bg:#F7F4EF;
  --surface:#FFFFFF;
  --primary:#1B3A4B;
  --primary-light:#2A5570;
  --primary-dim:#EBF0F3;
  --accent:#E8A020;
  --accent-light:#FDF3E0;
  --success:#2D6A4F;
  --success-bg:#EAF4EE;
  --danger:#C1440E;
  --danger-bg:#FDEEE8;
  --warning:#B57A00;
  --warning-bg:#FDF3E0;
  --muted:#9C8F85;
  --border:#E8E2DA;
  --text:#1C1917;
  --text-2:#4A4540;
  --text-3:#7A726B;
  --radius:14px;
  --radius-sm:8px;
  --radius-lg:20px;
  --shadow:0 2px 12px rgba(27,58,75,0.08);
  --shadow-lg:0 8px 32px rgba(27,58,75,0.14);
  --font:'DM Sans',sans-serif;
  --mono:'DM Mono',monospace;
  --nav-h:64px;
  --header-h:56px;
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden;background:var(--bg)}
body{font-family:var(--font);color:var(--text);font-size:15px;line-height:1.5}
button{font-family:var(--font);cursor:pointer;border:none;outline:none}
input,select,textarea{font-family:var(--font);outline:none;border:none}
a{text-decoration:none;color:inherit}

/* ─── LOADING SCREEN ─────────────────────── */
#loading-screen{
  position:fixed;inset:0;background:var(--primary);
  z-index:99999;display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:16px;
  transition:opacity .3s ease
}
#loading-screen.hidden{opacity:0;pointer-events:none}
.loading-logo{font-size:52px}
.loading-title{font-size:26px;font-weight:800;color:#fff}
.loading-title span{color:var(--accent)}
.loading-sub{font-size:14px;color:rgba(255,255,255,.5)}
.loading-spinner{
  width:36px;height:36px;border:3px solid rgba(255,255,255,.2);
  border-top-color:var(--accent);border-radius:50%;
  animation:spin .8s linear infinite;margin-top:8px
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ─── LAYOUT ──────────────────────────────── */
#app{display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden}
#header{
  height:var(--header-h);flex-shrink:0;
  background:var(--primary);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 16px;
  box-shadow:0 1px 0 rgba(255,255,255,0.08);
  position:relative;z-index:100
}
#header-title{font-size:17px;font-weight:700;color:#fff;display:flex;align-items:center;gap:8px}
#header-title span{color:var(--accent)}
#header-actions{display:flex;gap:6px}
.hbtn{
  width:36px;height:36px;border-radius:50%;
  background:rgba(255,255,255,0.1);color:#fff;font-size:16px;
  display:flex;align-items:center;justify-content:center;transition:background .15s
}
.hbtn:active{background:rgba(255,255,255,0.2)}

#content{flex:1;overflow:hidden;position:relative}
.page{
  position:absolute;inset:0;overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  padding:16px 16px 80px;display:none;
  animation:fadeUp .2s ease both
}
.page.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* ─── BOTTOM NAV ─────────────────────────── */
#nav{
  height:var(--nav-h);flex-shrink:0;
  background:var(--surface);border-top:1px solid var(--border);
  display:flex;position:relative;z-index:100
}
.nav-btn{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  gap:3px;background:transparent;
  color:var(--muted);font-size:10px;font-weight:600;
  letter-spacing:.3px;text-transform:uppercase;
  transition:color .15s;position:relative;padding-bottom:2px
}
.nav-btn .icon{font-size:20px;line-height:1;transition:transform .15s}
.nav-btn.active{color:var(--primary)}
.nav-btn.active .icon{transform:scale(1.1)}
.nav-btn.active::after{
  content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:32px;height:2px;background:var(--accent);border-radius:2px
}
.nav-fab{flex:1;display:flex;align-items:center;justify-content:center;background:transparent;position:relative}
.nav-fab-btn{
  width:52px;height:52px;border-radius:50%;
  background:var(--primary);color:#fff;font-size:26px;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 4px 16px rgba(27,58,75,0.35);margin-top:-20px;
  transition:transform .15s,box-shadow .15s
}
.nav-fab-btn:active{transform:scale(.94);box-shadow:0 2px 8px rgba(27,58,75,0.3)}

/* ─── DESKTOP LAYOUT ─────────────────────── */
@media(min-width:768px){
  #app{flex-direction:row}
  #header{display:none}
  #nav{
    width:220px;height:100vh;height:100dvh;flex-direction:column;
    border-top:none;border-right:1px solid var(--border);padding:0;overflow:hidden
  }
  #nav-logo{
    padding:24px 20px 20px;font-size:20px;font-weight:800;color:var(--primary);
    border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px
  }
  #nav-logo span{color:var(--accent)}
  #nav-inner{flex:1;overflow-y:auto;padding:12px 0}
  .nav-btn{
    flex:none;width:100%;flex-direction:row;justify-content:flex-start;
    padding:11px 20px;gap:12px;font-size:13px;border-radius:0;
    letter-spacing:0;text-transform:none
  }
  .nav-btn .icon{font-size:18px}
  .nav-btn.active{background:var(--primary-dim);color:var(--primary)}
  .nav-btn.active::after{display:none}
  .nav-btn.active .nav-dot{width:3px;height:24px;background:var(--primary);border-radius:2px;position:absolute;left:0}
  .nav-fab{display:none}
  #nav-bottom{padding:16px;border-top:1px solid var(--border)}
  #content{flex:1;height:100vh;height:100dvh}
  .page{padding:24px 28px 24px;left:0}
}

/* ─── CARDS & SECTIONS ───────────────────── */
.card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin-bottom:12px}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
.card-title{font-size:13px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:.5px}
.section-title{font-size:12px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:.6px;margin:20px 0 10px}
.section-title:first-child{margin-top:4px}

/* ─── KPI GRID ───────────────────────────── */
.kpi-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:4px}
@media(min-width:540px){.kpi-grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:900px){.kpi-grid{grid-template-columns:repeat(6,1fr)}}
.kpi-card{background:var(--surface);border-radius:var(--radius);padding:14px 14px 12px;box-shadow:var(--shadow);border-top:3px solid var(--primary)}
.kpi-card.accent{border-top-color:var(--accent)}
.kpi-card.success{border-top-color:var(--success)}
.kpi-card.danger{border-top-color:var(--danger)}
.kpi-card.warn{border-top-color:var(--warning)}
.kpi-card.muted{border-top-color:var(--muted)}
.kpi-label{font-size:10px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}
.kpi-val{font-size:18px;font-weight:700;color:var(--text);font-family:var(--mono);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.kpi-sub{font-size:10px;color:var(--muted);margin-top:2px}

/* ─── LIST ITEMS ─────────────────────────── */
.list-item{display:flex;align-items:flex-start;gap:12px;padding:12px 0;border-bottom:1px solid var(--border)}
.list-item:last-child{border-bottom:none;padding-bottom:0}
.li-icon{width:38px;height:38px;border-radius:10px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:17px}
.li-body{flex:1;min-width:0}
.li-title{font-size:14px;font-weight:600;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.li-sub{font-size:12px;color:var(--text-3);margin-top:1px}
.li-right{flex-shrink:0;text-align:right}
.li-val{font-size:14px;font-weight:700;font-family:var(--mono)}
.li-badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:.3px;text-transform:uppercase;margin-top:3px}
.badge-paid{background:var(--success-bg);color:var(--success)}
.badge-partial{background:var(--warning-bg);color:var(--warning)}
.badge-unpaid{background:var(--accent-light);color:var(--accent)}
/* UTF-8 FIX: explicitly encoded "Overdue" badge — no rendering artefacts */
.badge-overdue{background:var(--danger-bg);color:var(--danger);font-family:var(--font);unicode-bidi:plaintext}
.badge-low{background:var(--warning-bg);color:var(--warning)}
.badge-out{background:var(--danger-bg);color:var(--danger)}

/* ─── FORMS ──────────────────────────────── */
.form-group{margin-bottom:14px}
.form-label{font-size:11px;font-weight:700;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:6px}
.form-control{width:100%;background:var(--bg);border:1.5px solid var(--border);border-radius:var(--radius-sm);padding:11px 13px;font-size:15px;color:var(--text);transition:border-color .15s,box-shadow .15s}
.form-control:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(27,58,75,0.1)}
select.form-control{appearance:none;background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 7L11 1' stroke='%239C8F85' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:34px}
textarea.form-control{resize:vertical;min-height:72px}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-hint{font-size:11px;color:var(--muted);margin-top:4px}
.form-preview{background:var(--primary-dim);border-radius:var(--radius-sm);padding:12px 14px;margin-bottom:14px}
.form-preview-row{display:flex;justify-content:space-between;align-items:baseline;font-size:13px;padding:3px 0}
.form-preview-row .lbl{color:var(--text-3)}
.form-preview-row .val{font-weight:700;font-family:var(--mono);color:var(--text)}
.form-preview-row .profit{color:var(--success)}
.form-preview-row .balance{color:var(--accent);font-weight:700}

/* ─── BUTTONS ────────────────────────────── */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:7px;padding:12px 20px;border-radius:var(--radius-sm);font-size:14px;font-weight:600;transition:all .15s;cursor:pointer;border:none}
.btn-primary{background:var(--primary);color:#fff;width:100%;box-shadow:0 4px 14px rgba(27,58,75,0.25)}
.btn-primary:active{transform:scale(.98);box-shadow:none}
.btn-accent{background:var(--accent);color:#fff;width:100%;box-shadow:0 4px 14px rgba(232,160,32,0.3)}
.btn-ghost{background:transparent;color:var(--text-2);border:1.5px solid var(--border);padding:10px 16px}
.btn-ghost:active{background:var(--bg)}
.btn-danger{background:var(--danger-bg);color:var(--danger);border:1.5px solid rgba(193,68,14,.2)}
.btn-sm{padding:7px 14px;font-size:12px;border-radius:6px}
.btn-block{width:100%}
.btn:disabled{opacity:.45;pointer-events:none}

/* ─── ALERT / TOAST ──────────────────────── */
#toast{
  position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(20px);
  background:var(--primary);color:#fff;padding:10px 20px;border-radius:30px;
  font-size:13px;font-weight:500;box-shadow:var(--shadow-lg);
  z-index:9999;opacity:0;transition:all .25s;
  white-space:nowrap;max-width:90vw;overflow:hidden;text-overflow:ellipsis;pointer-events:none
}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
@media(min-width:768px){#toast{bottom:20px}}

.alert{padding:12px 14px;border-radius:var(--radius-sm);font-size:13px;margin-bottom:12px;display:flex;gap:10px;align-items:flex-start}
.alert-success{background:var(--success-bg);color:var(--success)}
.alert-error{background:var(--danger-bg);color:var(--danger)}
.alert-warn{background:var(--warning-bg);color:var(--warning)}
.alert-info{background:var(--primary-dim);color:var(--primary)}

/* ─── MODAL / DRAWER ─────────────────────── */
#modal-overlay{position:fixed;inset:0;background:rgba(28,25,23,0.5);z-index:500;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(2px)}
#modal-overlay.open{display:flex;animation:fadeIn .2s ease both}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{background:var(--surface);border-radius:var(--radius-lg) var(--radius-lg) 0 0;width:100%;max-height:92vh;overflow-y:auto;padding:0 16px 32px;animation:slideUp .25s cubic-bezier(.4,0,.2,1) both}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-handle{width:36px;height:4px;background:var(--border);border-radius:4px;margin:12px auto 20px}
.modal-title{font-size:18px;font-weight:700;margin-bottom:18px;color:var(--text)}
@media(min-width:768px){
  #modal-overlay{align-items:center}
  .modal{border-radius:var(--radius-lg);max-width:520px;max-height:85vh;animation:scaleIn .2s ease both}
  @keyframes scaleIn{from{opacity:0;transform:scale(.97)}to{opacity:1;transform:scale(1)}}
}

/* ─── SEARCH / FILTER ────────────────────── */
.search-box{display:flex;align-items:center;gap:10px;background:var(--surface);border:1.5px solid var(--border);border-radius:var(--radius-sm);padding:10px 13px;margin-bottom:14px}
.search-box input{flex:1;background:transparent;font-size:14px;color:var(--text)}
.search-box input::placeholder{color:var(--muted)}

/* ─── TABS ───────────────────────────────── */
.tab-row{display:flex;gap:4px;background:var(--bg);border-radius:var(--radius-sm);padding:3px;margin-bottom:16px}
.tab-btn{flex:1;padding:8px 6px;border-radius:6px;font-size:12px;font-weight:600;color:var(--muted);background:transparent;transition:all .15s;text-align:center}
.tab-btn.active{background:var(--surface);color:var(--primary);box-shadow:var(--shadow)}
.tab-panel{display:none}
.tab-panel.active{display:block}

/* ─── EMPTY STATE ────────────────────────── */
.empty{text-align:center;padding:48px 24px;color:var(--muted)}
.empty-icon{font-size:48px;margin-bottom:12px;opacity:.5}
.empty-text{font-size:15px;font-weight:500;margin-bottom:4px;color:var(--text-3)}
.empty-sub{font-size:13px}

/* ─── ONBOARDING ─────────────────────────── */
#onboard{position:fixed;inset:0;background:var(--primary);z-index:9000;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;text-align:center}
#onboard.gone{display:none}
.ob-logo{font-size:48px;margin-bottom:16px}
.ob-title{font-size:30px;font-weight:800;color:#fff;margin-bottom:6px}
.ob-title span{color:var(--accent)}
.ob-sub{font-size:15px;color:rgba(255,255,255,.6);margin-bottom:36px;max-width:320px}
.ob-form{width:100%;max-width:380px}
.ob-input{width:100%;background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.2);border-radius:var(--radius-sm);padding:14px 16px;font-size:16px;color:#fff;margin-bottom:12px}
.ob-input::placeholder{color:rgba(255,255,255,.4)}
.ob-input:focus{border-color:var(--accent);outline:none}
.ob-btn{width:100%;background:var(--accent);color:#fff;border:none;border-radius:var(--radius-sm);padding:15px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 6px 20px rgba(232,160,32,0.4);transition:transform .15s}
.ob-btn:active{transform:scale(.98)}
.ob-privacy{font-size:11px;color:rgba(255,255,255,.4);margin-top:16px;line-height:1.6}

/* ─── SETTINGS SPECIFIC ──────────────────── */
.setting-row{display:flex;align-items:center;justify-content:space-between;padding:14px 0;border-bottom:1px solid var(--border)}
.setting-row:last-child{border-bottom:none}
.setting-label{font-size:14px;font-weight:500;color:var(--text)}
.setting-val{font-size:13px;color:var(--text-3);font-family:var(--mono)}

/* ─── SCROLLBAR ──────────────────────────── */
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

/* ─── MISC ───────────────────────────────── */
.currency{font-size:11px;font-weight:600;color:var(--muted);margin-right:1px}
.divider{height:1px;background:var(--border);margin:12px 0}
.text-muted{color:var(--muted)}
.text-success{color:var(--success)}
.text-danger{color:var(--danger)}
.text-accent{color:var(--accent)}
.fw-bold{font-weight:700}
.mono{font-family:var(--mono)}
.mt-4{margin-top:4px}.mt-8{margin-top:8px}.mt-12{margin-top:12px}.mt-16{margin-top:16px}
.flex{display:flex}.flex-center{align-items:center}.gap-8{gap:8px}.gap-12{gap:12px}
.justify-between{justify-content:space-between}
.invoice-sheet{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:24px;font-size:13px}
.invoice-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}
.invoice-table{width:100%;border-collapse:collapse;margin:16px 0;font-size:12px}
.invoice-table th{background:var(--primary-dim);padding:8px;text-align:left;font-size:10px;text-transform:uppercase;letter-spacing:.4px}
.invoice-table td{padding:8px;border-bottom:1px solid var(--border)}
.invoice-totals{margin-left:auto;max-width:220px;font-size:13px}
.invoice-totals tr td{padding:5px 0}
.invoice-totals tr td:last-child{text-align:right;font-family:var(--mono);font-weight:600}

@media print{
  #app,#toast,#modal-overlay{display:none!important}
  .invoice-print{display:block!important}
}
